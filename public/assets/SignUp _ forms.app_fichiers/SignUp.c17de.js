(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{vLmc:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{class:e.mainClass},[e.signupWithMail?t("i-form",{ref:"form",attrs:{validateOnSubmit:""}},[e.hasServerSideError&&""!==e.errorMessage?t("i-alert",{attrs:{type:"error"}},[e._v("\n\t\t\t"+e._s(e.errorMessage)+"\n\t\t")]):e._e(),e._v(" "),t("div",{staticClass:"control-wrapper"},[t("label",[e._v(e._s(e.$t("fullname")))]),e._v(" "),t("i-text",{ref:"fullname",attrs:{placeholder:e.$t("auth.enterNameSurname"),required:"",name:"full-name",autocomplete:"name",rules:e.validationRoles.fullnameRoles},on:{focus:e.onInputFocus,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)}},model:{value:e.fullname,callback:function(t){e.fullname=t},expression:"fullname"}})],1),e._v(" "),t("div",{staticClass:"control-wrapper"},[t("label",[e._v(e._s(e.$t("email")))]),e._v(" "),t("i-text",{ref:"email",attrs:{placeholder:e.$t("auth.exampleEmail"),required:"",rules:e.validationRoles.emailRoles,name:"email",autocomplete:"email",type:"email"},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)},e.keyupEvent]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),t("div",{staticClass:"control-wrapper"},[t("label",[e._v(e._s(e.$t("auth.username")))]),e._v(" "),t("i-text",{ref:"username",attrs:{placeholder:e.$t("auth.enterUsername"),required:"",rules:e.validationRoles.usernameRoles,name:"username"},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)},e.keyupEventUserName]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),e.showUserNameSuggestions?t("UserNameSuggestionsComponent",{attrs:{userNameSuggestions:e.userNameSuggestions,setUserName:e.setUserName}}):e._e(),e._v(" "),e.showUsernameInfoAlert?t("i-alert",{staticClass:"username-alert"},[e._v("\n\t\t\t\t"+e._s(e.$t("auth.usernameAlert"))+"\n\t\t\t")]):e._e()],1),e._v(" "),t("div",{staticClass:"control-wrapper"},[t("label",[e._v(e._s(e.$t("password")))]),e._v(" "),t("i-text",{ref:"password",staticClass:"sign-password-input",attrs:{placeholder:e.$t("auth.yourPassword"),required:"",rules:e.validationRoles.passwordRoles,appendIcon:e.passwordAppendIcon,name:"password",type:e.showPassword?"text":"password"},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)},e.keyupEvent],focus:e.onInputFocus,clickAppendIcon:e.clickAppendIcon},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),t("div",{staticClass:"control-wrapper"},[t("div",{staticClass:"terms-user"},[t("i-checkbox",{staticClass:"terms-checkbox",attrs:{"show-control":""},model:{value:e.terms,callback:function(t){e.terms=t},expression:"terms"}},[t("div",{staticClass:"t-and-c-label"},[t("i18n",{attrs:{path:"IAccept"}},[t("router-link",{staticClass:"text-btn",attrs:{place:"terms",target:"_blank",to:"/"+e.$i18n.locale+"/terms"}},[e._v(e._s(e.$t("termsOfUse")))]),e._v(" "),t("router-link",{staticClass:"text-btn",attrs:{place:"privacy",target:"_blank",to:"/en/privacy-policy"}},[e._v(e._s(e.$t("privacyPolicy")))])],1)],1)]),e._v(" "),t("i-question-validation",{ref:"input",attrs:{required:"",rules:e.validationRoles.requiredTermsAccept()},model:{value:e.terms,callback:function(t){e.terms=t},expression:"terms"}})],1)]),e._v(" "),t("div",{staticClass:"control-wrapper"},[t("Captcha",{key:e.captchaVersion,ref:"captcha",attrs:{version:e.captchaVersion},model:{value:e.captchaOptions,callback:function(t){e.captchaOptions=t},expression:"captchaOptions"}})],1),e._v(" "),t("div",{staticClass:"auth-button-wrapper control-wrapper"},[t("i-button",{staticClass:"auth-button",class:{"loading-btn":e.submitButtonLoading},attrs:{tabindex:"0",loading:e.submitButtonLoading},on:{click:e.onSubmit}},[e._v(e._s(e.$t("auth.signUp")))])],1)],1):[t("ExternalLoginsComponent",{attrs:{isSignUpPage:!0,setParentServerSideError:e.setServerSideError}}),e._v(" "),t("div",{staticClass:"or-content"},[t("span",[e._v(e._s(e.$t("conditions.or")))])]),e._v(" "),t("div",{staticClass:"auth-button-wrapper text-center control-wrapper"},[t("i-button",{staticClass:"auth-button sign-email-button",class:{"loading-btn":e.submitButtonLoading},attrs:{tabindex:"0",prependIcon:"envelope",loading:e.submitButtonLoading},on:{click:e.selectSignupWithMail}},[e._v(e._s(e.$t("auth.signUpWithMail")))])],1)],e._v(" "),t("div",{staticClass:"auth-button-bottom"},[t("p",[e._v(e._s(e.$t("auth.alreadyHaveAnAccount")))]),e._v(" "),t("router-link",{staticClass:"sign-up",attrs:{to:e.signInRoute}},[e._v(e._s(e.$t("login")))])],1)],2)};a._withStripped=!0;var r,i,n,o=s("yXPU"),u=s.n(o),l=s("ajPk"),c=s("5qru"),h=s("0d3v"),p=s("tL2h"),m=s("ttAG"),d=s("/BYU"),g=s("4da+"),v=s("luLf"),f=s("pjF1"),S=s("sjWk"),w=s("oQAm"),y={name:"SignUp",components:{ExternalLoginsComponent:l.a,UserNameSuggestionsComponent:c.a,Captcha:f.a},props:["mainClass"],data:function(){return{submitButtonLoading:!1,error:{},hasServerSideError:!1,errorMessage:"",valid:!0,fullname:"",createUserNameByFullname:!0,username:"",email:"",password:"",confirmPassword:"",terms:null,validationRoles:Object(g.a)(),showPassword:!1,passwordAppendIcon:"eye",signupWithMail:!1,signInRoute:{name:"SignIn",query:{redirect:this.$route.query.redirect,token:this.$route.query.token,provider:this.$route.query.provider}},showUserNameSuggestions:!1,hasUserNameSuggestions:!1,userNameSuggestions:[],showUsernameInfoAlert:!1,captchaVersion:3,captchaOptions:{}}},mounted:function(){"#withemail"===this.$route.hash&&(this.signupWithMail=!0),this.$auth.isAuthenticated()&&(d.a.setAuthTokenCookie(),m.default.redirectToLocalUrl(this.$route.query.redirect,this.$router)),this.$emit("setTitle","register")},methods:{keyupEventUserName:function(){this.username=d.a.userNameReplace(this.username),this.createUserNameByFullname=this.username.length<3,this.showUsernameInfoAlert=!0,this.keyupEvent()},keyupEvent:function(){this.hasServerSideError&&(this.hasServerSideError=!1,this.validationRoles=Object(g.a)(),this.$refs.form.validate())},setUserName:function(e){this.username=d.a.createUserName(e),this.createUserNameByFullname=!1,this.validationRoles=Object(g.a)(),this.hasServerSideError=!1,this.showUserNameSuggestions=!1},onSubmit:(n=u()((function*(){this.hasServerSideError=!0,this.errorMessage="",this.validationRoles=Object(g.a)(),this.submitButtonLoading=!0;var e=!1;if(this.$refs.form.validate()){if(3===this.captchaVersion&&!this.captchaOptions.isOk){var t=Object(w.a)(this.username.split("@")[0]);this.captchaOptions=yield this.$refs.captcha.getToken(!0,"".concat(t,"_sign_up"))}if(!0===this.captchaOptions.isOk){this.showUserNameSuggestions=!1,this.hasUserNameSuggestions=!1,this.userNameSuggestions=d.a.createUserNameSuggestions(this.username,[{type:"text",value:this.fullname},{type:"email",value:this.email}]);var s=yield h.a.register({username:this.username,userNameSuggestions:this.userNameSuggestions,email:this.email,password:this.password,fullname:this.fullname,timezone:this.$root.user.info.timezone.value,culture:this.$root.user.info.culture.name,captcha:this.captchaOptions,isDarkMode:this.$root.isDarkMode});s.success?("activeElement"in document&&document.activeElement.blur(),S.a.emailLogin(s.access_token),this.submitButtonLoading=!0,yield d.a.onAfterSuccessRegister(this,m.default,p.a,s,"email"),e=!0):(this.hasServerSideError=!0,s.errors.captchaIsRequired?(this.captchaVersion=2,this.errorMessage=this.$t("notARobot"),window.scroll({behavior:"smooth",top:this.$refs.captcha.offsetTop})):!1===s.errors.success?(this.$refs.captcha.reset(),this.errorMessage=this.captchaOptions.errorMessage):(this.error=s.errors,s.errors.fieldErrors.forEach(e=>{if(this.validationRoles[e.fieldName+"Roles"].push(()=>Object(v.a)("auth."+e.error.errorCode)),e.userNameSuggestions){this.userNameSuggestions=d.a.userNameSuggestionsFix(e.userNameSuggestions);var t=d.a.userNameSuggestionsFix(e.userNameSuggestions),s=t.splice(0,Math.ceil(t.length/2));this.userNameSuggestions=[],this.userNameSuggestions.push(t),this.userNameSuggestions.push(s),this.showUserNameSuggestions=!0,this.hasUserNameSuggestions=!0}}),this.$refs.form.validate(),this.$refs.captcha.reset()))}else this.captchaVersion=2,this.$refs.captcha&&this.$refs.captcha.reset()}this.submitButtonLoading=e})),function(){return n.apply(this,arguments)}),setServerSideError:function(e,t,s){this.$router.push({name:"SignIn",params:{hasServerSideError:e,errorMessage:t,email:s}})},onUserNameFocus:function(){this.hasUserNameSuggestions&&(this.showUserNameSuggestions=!0)},onInputFocus:function(){this.showUserNameSuggestions=!1},selectSignupWithMail:(i=u()((function*(){this.$router.push({hash:"#withemail"})})),function(){return i.apply(this,arguments)}),clickAppendIcon:(r=u()((function*(){this.showPassword=!this.showPassword,this.showPassword?this.passwordAppendIcon="eye-slash":this.passwordAppendIcon="eye"})),function(){return r.apply(this,arguments)})},watch:{"$route.hash"(){this.signupWithMail="#withemail"===this.$route.hash}}},k=s("KHd+"),_=Object(k.a)(y,a,[],!1,null,null,null);t.default=_.exports}}]);